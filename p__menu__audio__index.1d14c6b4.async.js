(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"5sUj":function(e,t,a){e.exports={Audio:"Audio___1f_wB",audio:"Audio___1f_wB",line:"line___1oLds"}},KL6x:function(e,t,a){},lfel:function(e,t,a){"use strict";var i=a("nKUr"),n=e=>Object(i["jsx"])("div",{style:{width:e.width+"px",height:e.height+"px"}});t["a"]=n},zdj1:function(e,t,a){"use strict";a.r(t);var i=a("9og8"),n=a("WmNS"),c=a.n(n),r=a("5sUj"),s=a.n(r),o=a("/MKj"),d=a("FQJK"),u=(a("cWXX"),a("/ezw")),l=(a("Q9mQ"),a("diRs")),j=(a("8dk+"),a("eZ87")),b=a("tJVT"),v=(a("KL6x"),a("q1tI")),O=a("4ANX"),h=a("jnMK"),m=a("lfel"),p=a("vDqi"),x=a.n(p),f=a("Ns3m"),g=a("NEHW"),w=a("It0s"),y=a("SLhE"),L=a("nKUr"),N=e=>{var t=Object(v["useState"])(0),a=Object(b["a"])(t,2),n=a[0],r=a[1],s=Object(v["useState"])(null),o=Object(b["a"])(s,2),d=o[0],p=o[1],N=Object(v["useState"])(!1),F=Object(b["a"])(N,2),A=F[0],k=F[1];Object(g["a"])((()=>{var t;r(e.audioActiveIndex),k(!0),null===(t=document.getElementById("globalAudio"))||void 0===t||t.setAttribute("src",""),U(!1)}),[e.audioActiveIndex]),Object(v["useEffect"])((()=>{r(e.audioActiveIndex)}),[e.audioActiveIndex]);var I=Object(v["useState"])(""),S=Object(b["a"])(I,2),_=S[0],E=S[1];Object(v["useEffect"])((()=>{if(e.audioList&&0!==e.audioList.length&&-1!==n){if(!e.audioList[n])return;p(e.audioList[n]);var t=e.audioList[n].cid,a=Object(y["a"])(t,e.audioList[n].file_name);a===_?R():E(a)}}),[e.audioList,n]),Object(v["useEffect"])((()=>{R()}),[_]);var C=Object(v["useState"])((()=>{var e;return!(null===(e=document.getElementById("globalAudio"))||void 0===e||!e.getAttribute("src"))})),B=Object(b["a"])(C,2),z=B[0],U=B[1];function R(){return T.apply(this,arguments)}function T(){return T=Object(i["a"])(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!z){e.next=9;break}re(xe(Math.floor(P.duration))),me.run(),P.addEventListener("timeupdate",me.run,!1),P.addEventListener("ended",pe,!1),ue(!P.paused),K({}),e.next=17;break;case 9:if(_){e.next=11;break}return e.abrupt("return");case 11:return null===(t=document.getElementById("globalAudio"))||void 0===t||t.setAttribute("src",_),U(!1),e.next=15,V();case 15:a=e.sent,K(a);case 17:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function V(){return new Promise(((e,t)=>{var a=document.body.getAttribute("data-port");a?x.a.post("http://localhost:".concat(a,"/api/getAudioTags"),{url:_}).then((t=>{e(t.data)})).catch((e=>{t(e)})):e({})}))}function K(e){return M.apply(this,arguments)}function M(){return M=Object(i["a"])(c.a.mark((function e(t){var a,i,n,r,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a="",i=(null===t||void 0===t?void 0:t.artist)||"",t.picture&&(n=new Uint8Array(t.picture.data),r=new Blob([n],{type:t.picture.type}),a=URL.createObjectURL(r)),d){e.next=5;break}return e.abrupt("return");case 5:s=d,X({logo:a||"",title:s.file_name,user:i,size:Object(f["b"])(s.file_size,2),createTime:Object(f["a"])(s.created),cid:s.cid,url:_}),A&&he(),k(!1);case 9:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}var J=Object(v["useState"])((()=>{var e=document.getElementById("globalAudio");return e})),D=Object(b["a"])(J,2),P=D[0],q=(D[1],Object(v["useState"])()),Q=Object(b["a"])(q,2),W=Q[0],X=Q[1],H=Object(v["useState"])(0),Z=Object(b["a"])(H,2),G=Z[0],Y=Z[1],$=Object(v["useState"])("00:00"),ee=Object(b["a"])($,2),te=ee[0],ae=ee[1],ie=Object(v["useState"])("00:00"),ne=Object(b["a"])(ie,2),ce=ne[0],re=ne[1],se=Object(v["useState"])(!1),oe=Object(b["a"])(se,2),de=oe[0],ue=oe[1],le=Object(v["useState"])(100),je=Object(b["a"])(le,2),be=je[0],ve=je[1];function Oe(){de?P.pause():P.play(),ue(!de)}function he(){P.play(),ue(!0)}Object(v["useEffect"])((()=>(z||(P.load(),P.oncanplay=()=>{re(xe(Math.floor(P.duration))),P.addEventListener("timeupdate",me.run,!1),P.addEventListener("ended",pe,!1)}),()=>{P&&(P.removeEventListener("timeupdate",me.run,!1),P.removeEventListener("ended",pe,!1))})),[P]);var me=Object(w["a"])((()=>{P&&(Y(P.currentTime),ae(xe(Math.floor(P.currentTime))))}),{wait:500});function pe(){P.pause(),ue(!1)}function xe(e){var t=parseInt(e,10),a=parseInt((t/60).toString(),10),i=(t%60).toString();return 0===a?a="00":a<10&&(a="0"+a),1===i.length&&(i="0"+i),a+":"+i}function fe(e){P.currentTime=e,me.run()}var ge=Object(v["useState"])(100*P.volume),we=Object(b["a"])(ge,2),ye=we[0],Le=we[1];Object(v["useEffect"])((()=>{P.volume=ye/100}),[ye]);var Ne=()=>Object(L["jsx"])("div",{className:"audioValumeProgress",children:Object(L["jsx"])(j["a"],{className:"audioVolumeProgressVertical",min:0,max:100,step:1,tooltipVisible:!1,defaultValue:ye,value:ye,vertical:!0,onChange:Fe})});function Fe(e){Le(e),ve(e)}function Ae(){Le(ye>0?0:be)}function ke(){var t=n-1;0===n&&(t=e.audioList.length-1),k(!0),r(t)}function Ie(){var t=n+1;n===e.audioList.length-1&&(t=0),k(!0),r(t)}function Se(){var e=d.file_name;x()({method:"get",url:_,responseType:"blob",headers:{"content-type":"audio/mpeg"}}).then((t=>{var a=new Blob([t.data],{type:t.data.type}),i=document.createElement("a"),n=window.URL.createObjectURL(a);i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)})).catch((e=>{console.warn(e)}))}function _e(){return W?Object(L["jsxs"])(L["Fragment"],{children:[Object(L["jsxs"])("div",{className:"titleBox",children:[Object(L["jsx"])("div",{className:"title",children:W.title}),W.user&&Object(L["jsxs"])("div",{className:"user",children:["- ",W.user]})]}),Object(L["jsxs"])("div",{className:"infoBox",children:[Object(L["jsxs"])("div",{children:[Object(L["jsx"])("div",{className:"title",children:"\u6587\u4ef6\u5927\u5c0f:\xa0"}),Object(L["jsx"])("div",{className:"value",children:W.size})]}),Object(L["jsxs"])("div",{children:[Object(L["jsx"])("div",{className:"title",children:"\u521b\u5efa\u65f6\u95f4:\xa0"}),Object(L["jsx"])("div",{className:"value",children:W.createTime})]}),Object(L["jsxs"])("div",{children:[Object(L["jsx"])("div",{className:"title",children:"CID:\xa0"}),Object(L["jsx"])("div",{className:"value pointer",onClick:Ee,children:Object(L["jsx"])(l["a"],{content:W.cid,children:W.cid.substr(0,25)+"..."})})]})]})]}):Object(L["jsx"])(u["a"],{paragraph:{rows:1}})}function Ee(){e.showCheck(e.audioActiveIndex,e.audioList[e.audioActiveIndex])}return Object(L["jsxs"])("div",{className:"AudioControl",children:[Object(L["jsx"])("div",{className:"audioImage",style:{backgroundImage:"url(".concat(null===W||void 0===W?void 0:W.logo,")")}}),Object(L["jsxs"])("div",{className:"controlBox",children:[_e(),Object(L["jsxs"])("div",{className:"actionBox",children:[Object(L["jsxs"])("div",{className:"actionLeft",children:[Object(L["jsx"])(h["a"],{borderAnimation:!0,radius:14,defaultBorder:!1,background:"linear-gradient(180deg, #F4F5F6 0%, #FFFFFF 100%)",children:Object(L["jsx"])("div",{className:"left",onClick:ke,children:Object(L["jsx"])(O["a"],{type:"icon-shangyishou",size:16})})}),Object(L["jsx"])(m["a"],{width:16}),Object(L["jsx"])(h["a"],{borderAnimation:!0,radius:18,defaultBorder:!1,background:"linear-gradient(180deg, #F4F5F6 0%, #FFFFFF 100%)",children:Object(L["jsx"])("div",{className:"playAndStop",onClick:Oe,children:de?Object(L["jsx"])(O["a"],{type:"icon-zanting",size:20}):Object(L["jsx"])(O["a"],{type:"icon-kaiqi",size:20})})}),Object(L["jsx"])(m["a"],{width:16}),Object(L["jsx"])(h["a"],{borderAnimation:!0,radius:14,defaultBorder:!1,background:"linear-gradient(180deg, #F4F5F6 0%, #FFFFFF 100%)",children:Object(L["jsx"])("div",{className:"right",onClick:Ie,children:Object(L["jsx"])(O["a"],{type:"icon-xiayishou",size:16})})}),Object(L["jsx"])(l["a"],{content:Ne(),overlayClassName:"audioVolumePopover",trigger:"hover",children:Object(L["jsx"])("div",{className:"volume",onClick:Ae,children:ye>0?Object(L["jsx"])(O["a"],{type:"icon-yinliang",size:16}):Object(L["jsx"])(O["a"],{type:"icon-jingyin",size:16})})}),Object(L["jsx"])("div",{className:"download",onClick:Se,children:Object(L["jsx"])(O["a"],{type:"icon-xiazai1",size:16})})]}),Object(L["jsxs"])("div",{className:"actionRight",children:[te," / ",ce]})]}),Object(L["jsx"])("div",{className:"progress",children:Object(L["jsx"])(j["a"],{className:"progress",min:0,max:Math.floor((null===P||void 0===P?void 0:P.duration)||0),step:1,tooltipVisible:!1,defaultValue:0,value:G,vertical:!1,onChange:fe})})]})]})};function F(e){var t=e.globalTop.dispatch,a=e.menu,i=a.audioList,n=a.audioActiveIndex;return{dispatch:t,audioList:i,audioActiveIndex:n}}var A=Object(o["c"])(F)(N),k=a("2LCi"),I=a("R8ux"),S=k["b"].contract,_=k["b"].getID,E=(k["b"].getlist,e=>{var t="\u97f3\u9891",a=function(){var e=Object(i["a"])(c.a.mark((function e(t){var a,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=10,e.next=3,S.view_files_in_folder({did:I["c"]+_,folder:"music",from_index:(t*a).toString(),limit:a});case 3:return i=e.sent,e.abrupt("return",JSON.parse(i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(L["jsx"])("div",{className:s.a.Audio,children:Object(L["jsx"])(d["a"],{getList:a,title:t,noData:"\u6682\u65e0\u97f3\u9891",tableAfterContent:t=>{var a;return(null===(a=e.audioList)||void 0===a?void 0:a.length)>0?Object(L["jsx"])(L["Fragment"],{children:Object(L["jsx"])(A,{showCheck:t})}):""}})})});function C(e){var t=e.menu.audioList;return{audioList:t}}t["default"]=Object(o["c"])(C)(E)}}]);